<ul class="settings-nav">
    <li class="settings-nav-item" [class.active]="active === 'general'">
        <button class="btn btn-text settings-nav-item-btn"
            (click)="setActiveTab('general')">General</button>
    </li>
    <li class="settings-nav-item" [class.active]="active === 'mainBlock'">
        <button class="btn btn-text settings-nav-item-btn"
            (click)="setActiveTab('mainBlock')">Main Block</button>
    </li>
    <li class="settings-nav-item" [class.active]="active === 'time'">
        <button class="btn btn-text settings-nav-item-btn"
            (click)="setActiveTab('time')">Time & Date</button>
    </li>
    <li class="settings-nav-item" [class.active]="active === 'background'">
        <button class="btn btn-text settings-nav-item-btn"
            (click)="setActiveTab('background')">Background</button>
    </li>
    <li class="settings-nav-item" [class.active]="active === 'weather'">
        <button class="btn btn-text settings-nav-item-btn"
            (click)="setActiveTab('weather')">Weather</button>
    </li>
    <li class="settings-nav-item" [class.active]="active === 'pomodoro'">
        <button class="btn btn-text settings-nav-item-btn"
            (click)="setActiveTab('pomodoro')">Pomodoro</button>
    </li>
    <li class="settings-nav-item" [class.active]="active === 'storage'">
        <button class="btn btn-text settings-nav-item-btn"
            (click)="setActiveTab('storage')">Storage</button>
    </li>
</ul>
<div class="setting-tab" *ngIf="active === 'general'">
    <div class="setting">
        <span>Disable notifications</span>
        <div role="checkbox" class="checkbox" tabindex="0"
            [class.checked]="settings.general.notificationsDisabled"
            (click)="toggleSettingCheckbox('notificationsDisabled')"
            (keyup.enter)="toggleSettingCheckbox('notificationsDisabled')"
            [attr.aria-checked]="settings.general.notificationsDisabled">
            <svg class="checkbox-tick" viewBox="0 0 24 24">
                <use href="#tick"></use>
            </svg>
        </div>
    </div>
    <div class="setting" [class.disabled]="settings.general.notificationsDisabled">
        <span>Don't focus tab on notification click</span>
        <div role="checkbox" class="checkbox" tabindex="0"
            [class.checked]="settings.general.notificationFocusDisabled"
            (click)="toggleSettingCheckbox('notificationFocusDisabled')"
            (keyup.enter)="toggleSettingCheckbox('notificationFocusDisabled')"
            [attr.aria-checked]="settings.general.notificationFocusDisabled">
            <svg class="checkbox-tick" viewBox="0 0 24 24">
                <use href="#tick"></use>
            </svg>
        </div>
    </div>
</div>
<div class="setting-tab" *ngIf="active === 'time'">
    <div class="setting">
        <span id="time-setting-label-1">Disable time</span>
        <div role="checkbox" class="checkbox" tabindex="0"
            [class.checked]="settings.time.disabled"
            (click)="toggleSettingCheckbox('disabled')"
            (keyup.enter)="toggleSettingCheckbox('disabled')"
            [attr.aria-checked]="settings.time.disabled"
            aria-labelledby="time-setting-label-1">
            <svg class="checkbox-tick" viewBox="0 0 24 24">
                <use href="#tick"></use>
            </svg>
        </div>
    </div>
    <div class="setting" [class.disabled]="settings.time.disabled">
        <span id="time-setting-label-2">Hide date</span>
        <div role="checkbox" class="checkbox" tabindex="0"
            [class.checked]="settings.time.dateHidden"
            (click)="toggleSettingCheckbox('dateHidden')"
            (keyup.enter)="toggleSettingCheckbox('dateHidden')"
            [attr.aria-checked]="settings.time.dateHidden"
            aria-labelledby="time-setting-label-2">
            <svg class="checkbox-tick" viewBox="0 0 24 24">
                <use href="#tick"></use>
            </svg>
        </div>
    </div>
    <div class="setting">
        <span id="time-setting-label-3">Time display format</span>
        <div class="toggle" tabindex="0"
            [class.checked]="settings.time.format === 24"
            (click)="toggleTimeFormat()"
            (keyup.enter)="toggleTimeFormat()"
            aria-labelledby="time-setting-label-3">
            <div>12</div>
            <div>24</div>
        </div>
    </div>
</div>
<div class="setting-tab" *ngIf="active === 'background'">
    <div class="setting">
        <span>Reset background</span>
        <button class="btn" (click)="resetBackground()">Reset</button>
    </div>
    <div class="setting setting-background">
        <div class="setting-background-title">Set background from...</div>
        <button class="btn btn-icon setting-background-viewer-btn"
            title="Adjust background position"
            *ngIf="settings.background.url"
            (click)="openBackgroundViewer()">
            <svg viewBox="0 0 24 24">
                <use href="#image"></use>
            </svg>
        </button>
        <div class="setting-background-items">
            <div class="setting-background-item">
                <button class="btn btn-icon setting-background-item-btn"
                    (click)="setActiveTab('dropbox')">
                    <svg viewBox="0 0 24 24">
                        <use href="#dropbox"></use>
                    </svg>
                    <span>Dropbox</span>
                </button>
            </div>
            <div class="setting-background-item">
                <button class="btn btn-text setting-background-item-btn" (click)="showBackgroundForm()">URL</button>
            </div>
        </div>
    </div>
    <p class="setting-background-info" *ngIf="backgroundInfo">Background image by <a [href]='"https://unsplash.com/@" + backgroundInfo.username  + "?utm_source=initium&utm_medium=referral"' class="setting-background-info-link">{{ backgroundInfo.name }}</a> on <a href="https://unsplash.com/?utm_source=initium&utm_medium=referral" class="setting-background-info-link">Unsplash</a></p>
</div>
<div class="setting-tab" *ngIf="active === 'weather'">
    <div class="setting">
        <span id="weather-setting-label-1">Disable weather</span>
        <div role="checkbox" class="checkbox" tabindex="0"
            [class.checked]="settings.weather.disabled"
            (click)="toggleSettingCheckbox('disabled')"
            (keyup.enter)="toggleSettingCheckbox('disabled')"
            [attr.aria-checked]="settings.weather.disabled"
            aria-labelledby="weather-setting-label-1">
            <svg class="checkbox-tick" viewBox="0 0 24 24">
                <use href="#tick"></use>
            </svg>
        </div>
    </div>
    <div class="setting" [class.disabled]="settings.weather.disabled">
        <span id="weather-setting-label-2">Temperature units</span>
        <div class="toggle" tabindex="0"
            [class.checked]="settings.weather.units === 'F'"
            (click)="toggleTemperatureUnits()"
            (keyup.enter)="toggleTemperatureUnits()"
            aria-labelledby="weather-setting-label-2">
            <div>°C</div>
            <div>°F</div>
        </div>
    </div>
    <div class="setting" [class.disabled]="settings.weather.disabled || settings.weather.useGeo">
        <span>City name (and country code)</span>
        <input type="text" class="input setting-input" placeholder="Paris,fr"
            [disabled]="settings.weather.disabled || settings.weather.useGeo"
            [value]="settings.weather.cityName"
            (keyup.enter)="setSetting({ cityName: $event.target.value })">
        <div class="setting-message" *ngIf="settingMessages.weather?.type === 'loc'">{{ settingMessages.weather.message }}</div>
    </div>
    <div class="setting setting-weather" [class.disabled]="settings.weather.disabled">
        <div class="setting-weather-item">
            <span>Use geolocation</span>
            <div role="checkbox" class="checkbox" [tabindex]="settings.weather.disabled ? '-1' : '0'"
                [class.checked]="settings.weather.useGeo"
                (click)="toggleSettingCheckbox('useGeo')"
                (keyup.enter)="toggleSettingCheckbox('useGeo')"
                [attr.aria-checked]="settings.weather.useGeo">
                <svg class="checkbox-tick" viewBox="0 0 24 24">
                    <use href="#tick"></use>
                </svg>
            </div>
        </div>
        <div class="setting-message" *ngIf="settingMessages.weather?.type === 'geo'">{{ settingMessages.weather.message }}</div>
    </div>
</div>
<div class="setting-tab" *ngIf="active === 'mainBlock'">
    <div class="setting">
        <span>Hide item bar</span>
        <div role="checkbox" class="checkbox" tabindex="0"
            [class.checked]="settings.mainBlock.isNavHidden"
            (click)="toggleSettingCheckbox('isNavHidden')"
            (keyup.enter)="toggleSettingCheckbox('isNavHidden')"
            [attr.aria-checked]="settings.mainBlock.isNavHidden">
            <svg class="checkbox-tick" viewBox="0 0 24 24">
                <use href="#tick"></use>
            </svg>
        </div>
    </div>
    <div class="setting">
        <span>Show one row of top sites</span>
        <div role="checkbox" class="checkbox" tabindex="0"
            [class.checked]="settings.mainBlock.showingOneRow"
            (click)="toggleSettingCheckbox('showingOneRow')"
            (keyup.enter)="toggleSettingCheckbox('showingOneRow')"
            [attr.aria-checked]="settings.mainBlock.showingOneRow">
            <svg class="checkbox-tick" viewBox="0 0 24 24">
                <use href="#tick"></use>
            </svg>
        </div>
    </div>
    <div class="setting">
        <span>Restore default top sites</span>
        <button class="btn" (click)="resetSetting({ resetTopSites: true })">Reset</button>
    </div>
</div>
<div class="setting-tab" *ngIf="active === 'pomodoro'">
    <div class="setting">
        <div>
            <div>Pomodoro duration</div>
            <div class="setting-add-desc">In minutes</div>
        </div>
        <input type="number" class="input setting-input" min="1"
            [value]="settings.pomodoro.duration"
            (change)="setPomodoroDuration($event, 'duration')">
    </div>
    <div class="setting">
        <div>
            <div>Short break duration</div>
            <div class="setting-add-desc">In minutes</div>
        </div>
        <input type="number" class="input setting-input" min="1"
            [value]="settings.pomodoro.short"
            (change)="setPomodoroDuration($event, 'short')">
    </div>
    <div class="setting">
        <div>
            <div>Long break duration</div>
            <div class="setting-add-desc">In minutes</div>
        </div>
        <input type="number" class="input setting-input" min="1"
            [value]="settings.pomodoro.long"
            (change)="setPomodoroDuration($event, 'long')">
    </div>
</div>
<storage class="setting-tab" *ngIf="active === 'storage'"></storage>
<div class="setting-tab setting-tab-form-container"
    *ngIf="active === 'background-form'">
    <form (submit)="handleBackgroundFormSubmit($event)">
        <h3 class="setting-tab-form-title">Set background</h3>
        <div class="setting-tab-form-input-container">
            <input type="text" class="input" placeholder="URL">
            <button class="btn setting-tab-form-submit-btn">Done</button>
        </div>
        <div class="setting-tab-form-message" *ngIf="backgroundUrlInvalid">URL does not contain valid image</div>
    </form>
</div>
<dropbox class="setting-tab dropbox-container" *ngIf="active === 'dropbox'"
    (sessionEnded)="setActiveTab('background')"></dropbox>
